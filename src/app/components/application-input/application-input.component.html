<div class="component-container">
  <h3>Job Application Details</h3>

  <form #appForm="ngForm" (ngSubmit)="onDataLogged()" >
    <mat-form-field color="accent">
      <mat-label>Company Name </mat-label>
      <input matInput placeholder="NASA" [(ngModel)]="appDetails.company" maxlength="60" [errorStateMatcher]="errorStateMatcher" name="companyInput" #companyInput="ngModel" required #companyInput>
      <mat-error *ngIf="companyInput.dirty && companyInput.invalid" class="warning-text">Company Name cannot be empty</mat-error>
    </mat-form-field>

    <mat-form-field color="accent">
      <mat-label>Position Title </mat-label>
      <input matInput placeholder="Janitor" [(ngModel)]="appDetails.title" maxlength="100" [errorStateMatcher]="errorStateMatcher" name="positionInput" #positionInput="ngModel" required>
      <mat-error *ngIf="positionInput.dirty && positionInput.invalid" class="warning-text">Position Title cannot be empty</mat-error>
    </mat-form-field>

    <mat-form-field color="accent">
      <input matInput [matDatepicker]="picker" [(ngModel)]="appDetails.date" (dateChange)="onDateChange($event)"
        placeholder="Date Applied " style="width: 250px;" (focus)="picker.open()" [errorStateMatcher]="errorStateMatcher" name="dateInput" #dateInput="ngModel" required/>
      <mat-error *ngIf="dateInput.dirty && dateInput.invalid" class="warning-text">Application Date must be specified</mat-error>
      <mat-datepicker-toggle matSuffix [for]="picker">
        <mat-icon matDatepickerToggleIcon>arrow_drop_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker color="accent" [startAt]="appDetails.date" #picker></mat-datepicker>
    </mat-form-field>

    <div>
      <mat-form-field color="accent">
        <mat-label>Status</mat-label>
        <mat-select color="accent" [(ngModel)]="appDetails.status" name="statusInput" >
          <mat-option *ngFor="let status of statuses" [value]="status.value">
            {{status.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div>
      <mat-form-field color="accent">
        <mat-label>Applied via</mat-label>
        <mat-select color="accent" [(ngModel)]="appDetails.source" name="sourceInput" >
          <mat-option *ngFor="let source of sources" [value]="source.value">
            {{source.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div>
      <mat-form-field style="margin: auto;"  color="accent">
        <textarea matInput rows="5" cols="36" placeholder="Other job details..." style="text-align: left;"
          [(ngModel)]="appDetails.notes" maxlength="500" name="notesInput" ></textarea>
      </mat-form-field>
    </div>

    <!-- <input type="submit" class="submit-button" onclick="onDataLogged()"> -->
    <button type="submit" class="submit-button" [disabled]="!appForm.form.valid">Add Application</button>
  </form>

</div>

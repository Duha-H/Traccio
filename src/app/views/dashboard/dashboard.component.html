<div class="view-container">
  <div class="greeting">
    <h2>Hi there, {{ name }}!</h2>
  </div>
  <div class="dashboard-content" *ngIf="selectedJourney; else elseContent">
    <div class="dashboard-header">
      <h3>{{selectedJourney.value.title}}</h3>
      <div class="spacer"></div>
      <div>
        <mat-form-field>
          <mat-select color="primary" [(ngModel)]="selectedJourney" name="journeySelection" (selectionChange)="selectYear(selectedJourney.years[0])">
            <mat-option *ngFor="let journey of dropdownContent" [value]="journey">
              {{journey.viewValue}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <div class="journey-details">
			<div class="data-container">
				<div class="calendar-container">
					<calendar-wrapper [data]="selectedJourney.calendarData" [from]="currentYear+'-02-01'" [to]="currentYear+'-11-01'"
						[emptyColor]="'#21e6c214'" [colors]="[ '#61cdbb', '#97e3d5', '#e8c1a0', '#f47560' ]"
						[yearSpacing]="yearSpacing" [monthBorderColor]="'#22232d'" [dayBorderWidth]="dayBorderWidth"
						[dayBorderColor]="'#22232d'" [legends]="[
							{
								anchor: 'bottom-right',
								direction: 'row',
								translateY: 0,
								itemCount: 4,
								itemWidth: 42,
								itemHeight: 36,
								itemsSpacing: 14,
								itemDirection: 'left-to-right',
								textColor: '#000',
								itemTextColor: '#fff'
							}]" [theme]="{axis: {
								textColor: '#f00'
							},
							textColor: '#f00',
							background: '#f00',
							markers: {
								textColor: '#f00'
							}
						}">
					</calendar-wrapper>
				</div>
				<ul style="list-style: none;" class="year-selector">
					<li *ngFor="let year of selectedJourney.years" (click)="selectYear(year)"
						[style.background-color]="year == currentYear ? 'var(--titles-secondary-dark)' : 'transparent'">
						<p [style.color]="year == currentYear ? 'var(--background-dark)' : 'var(--text-dark)'">{{year}}</p>
					</li>
				</ul>
			</div>

			<div class="data-container">
				<div class="status-container" style="height: 400px;">
					<pie-chart-wrapper
					[data]="selectedJourney.statusData"
					[margin]="{ top: 40, right: 200, bottom: 40, left: 80 }"
					[pixelRatio]="2"
					[innerRadius]="0.5"
					[padAngle]="0.7"
					[cornerRadius]="3"
					[colors]="{ scheme: 'paired' }"
					[borderColor]="{ from: 'color', modifiers: [ [ 'darker', 0.6 ] ] }"
					[radialLabelsSkipAngle]="10"
					[radialLabelsTextXOffset]="6"
					[radialLabelsTextColor]="'#333333'"
					[radialLabelsLinkOffset]="0"
					[radialLabelsLinkDiagonalLength]="16"
					[radialLabelsLinkHorizontalLength]="24"
					[radialLabelsLinkStrokeWidth]="1"
					[radialLabelsLinkColor]="{ from: 'color' }"
					[slicesLabelsSkipAngle]="10"
					[slicesLabelsTextColor]="'#333333'"
					[animate]="true"
					[motionStiffness]="90"
					[motionDamping]="15"
					[defs]="[
							{
									id: 'dots',
									type: 'patternDots',
									background: 'inherit',
									color: 'rgba(255, 255, 255, 0.3)',
									size: 4,
									padding: 1,
									stagger: true
							},
							{
									id: 'lines',
									type: 'patternLines',
									background: 'inherit',
									color: 'rgba(255, 255, 255, 0.3)',
									rotation: -45,
									lineWidth: 6,
									spacing: 10
							}
					]"
					[fill]="[
							{
									match: {
											id: 'ruby'
									},
									id: 'dots'
							},
							{
									match: {
											id: 'c'
									},
									id: 'dots'
							},
							{
									match: {
											id: 'go'
									},
									id: 'dots'
							},
							{
									match: {
											id: 'python'
									},
									id: 'dots'
							},
							{
									match: {
											id: 'scala'
									},
									id: 'lines'
							},
							{
									match: {
											id: 'lisp'
									},
									id: 'lines'
							},
							{
									match: {
											id: 'elixir'
									},
									id: 'lines'
							},
							{
									match: {
											id: 'javascript'
									},
									id: 'lines'
							}
					]"
					[legends]="[
							{
									anchor: 'right',
									direction: 'column',
									translateX: 140,
									itemWidth: 60,
									itemHeight: 14,
									itemsSpacing: 2,
									symbolSize: 14,
									symbolShape: 'circle'
							}
					]"
					>
					</pie-chart-wrapper>
				</div>
			</div>
			
      
    </div>

  </div>
  <ng-template class="dashboard-content" #elseContent>
    <h4>No active journeys to display</h4>
  </ng-template>

</div>

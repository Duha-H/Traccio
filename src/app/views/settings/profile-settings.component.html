<div class="setting-tab">
  <div class="setting">
    <p class="label">
      First name
      <mat-icon class="info-icon" (click)="displayTooltip('first-name', $event)">info</mat-icon>
    </p>
    <div class="setting-textfield">
      <text-field class="value" [width]="800" [height]="10" [center]="false" [displayLabel]="false" [text]="(userStore.user | async).firstName" [showUpdatedBorder]="updateCheck[ATTRIBS.FIRST_NAME]" (inputChange)="addUpdate(ATTRIBS.FIRST_NAME, $event)" #firstNameField></text-field>
      <div class="undo-button">
        <button title="undo changes" [disabled]="!updateCheck[ATTRIBS.FIRST_NAME]" (click)="undoChange(ATTRIBS.FIRST_NAME, firstNameField)">
          <mat-icon>replay</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="info" id="first-name">
    <p>Your first name is only used to personalize your experience</p>
  </div>

  <div class="setting">
    <p class="label">
      Last name
      <mat-icon class="info-icon" (click)="displayTooltip('last-name', $event)">info</mat-icon>
    </p>
    <div class="setting-textfield">
      <text-field class="value" [width]="800" [height]="10" [center]="false" [displayLabel]="false" [text]="(userStore.user | async).lastName" [showUpdatedBorder]="updateCheck[ATTRIBS.LAST_NAME]" (inputChange)="addUpdate(ATTRIBS.LAST_NAME, $event)" #lastNameField></text-field>
      <div class="undo-button">
        <button title="undo changes" [disabled]="!updateCheck[ATTRIBS.LAST_NAME]" (click)="undoChange(ATTRIBS.LAST_NAME, lastNameField)">
          <mat-icon>replay</mat-icon>
        </button>
      </div>
    </div>
    
  </div>
  <div class="info" id="last-name">
    <p>Your last name is only used to personalize your experience</p>
  </div>

  <div class="{{ (userStore.user | async).identityProvider == 'GOOGLE' ? 'setting disabled' : 'setting' }}">
    <div class="label">
      <p class="label">
        Change email
        <mat-icon class="info-icon" (click)="displayTooltip('email', $event)">info</mat-icon>
      </p>
      
      <div class="info" style="padding: 5px 0;" id="email">
        <p id="alt-info">{{
          (userStore.user | async).identityProvider == 'GOOGLE'
          ? 'Your email address is provided by an external provider (Google) and cannot be changed.'
          : 'Your email address is used as a login credential, so make sure you provide a valid address.'
        }}</p>
      </div>
    </div>
    <div class="setting-textfield" style="align-items: flex-start;">
      <div class="value value-div">
        <text-field [width]="800" [height]="10" [center]="false" [displayLabel]="false" [text]="(userStore.user | async).email" [showUpdatedBorder]="updateCheck[ATTRIBS.EMAIL]" (inputChange)="addUpdate(ATTRIBS.EMAIL, $event)" [control]="email" [displayFeedback]="true" #emailField></text-field>
        <div id="alert-div" *ngIf="!email.valid">
          <p class="warning-text">Please make sure to enter a valid email address</p>
        </div>
      </div>
      <div class="undo-button">
        <button title="undo changes" [disabled]="!updateCheck[ATTRIBS.EMAIL]" (click)="undoChange(ATTRIBS.EMAIL, emailField)">
          <mat-icon>replay</mat-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="info"></div>
  
  

  <div class="setting">
    <div class="label">
      <p class="label">
        Change password
        <mat-icon class="info-icon" (click)="displayTooltip('password', $event)">info</mat-icon>
      </p>
      <div class="info" style="padding: 5px 0;" id="password">
        <p id="alt-info">Your password should be atleast 8 characters long, and should contain atleast 1 upper-case letter, atleast 1 lower-case letter, and atlease 1 number.</p>
      </div>
    </div>
    
    <div class="value password-change">
      <button class="toggle" (click)="toggleChangePassword()">
        <p>Change Password</p>
      </button>
    </div>

  </div>

  <div class="info info-centered">
    <p>All information displayed above is only available and visible to you, and not shared with anyone.</p>
  </div>
</div>
